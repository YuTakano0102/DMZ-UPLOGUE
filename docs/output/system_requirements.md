# システム要件定義書

## システム概要

**Uplogue（アップログ）**は、写真の位置情報と撮影時刻から旅行の行程を自動生成し、ユーザーの体験を時系列ストーリーとして記録・共有できるAI旅行記録プラットフォームです。本システムの目的は、旅行後の記録作業を完全自動化することで「写真は撮るが整理が続かない」という課題を解決し、個人の思い出をライフログとして蓄積しながら、その集合知を他のユーザーの旅行発見に活用することです。期待されるビジネスインパクトは、(1)記録の自動化による継続利用率の向上、(2)体験文脈付きデータの蓄積によるネットワーク効果、(3)旅行インサイトデータのB2B展開可能性の3点です。

### 1. システムの目的

#### 解決する具体的な課題
- **記録の継続困難性**：旅行後に写真は大量に残るが、時系列整理・場所の紐づけ・文章化が面倒で記録が放置される
- **SNS投稿の作業負荷**：投稿作成が目的化し、感情や文脈が失われる。断片的な情報のみが残る
- **旅行計画のレビュー依存**：他人の評価に頼り、自分の好みや体験に基づく「自分らしい旅」の発見が難しい

#### 目標とする成果
- 旅行後の生成完了率70%以上（アップロード→記録生成までの完遂率）
- 月間アクティブユーザーの30日後継続率50%以上
- 生成ストーリーのシェア率20%以上
- 1年以内に10万人のユーザー獲得とデータ蓄積による検索・発見機能の精度向上

#### 期待されるビジネスインパクト
- **短期（6ヶ月）**：アーリーアダプター（旅行後に写真が溜まって放置される人）500-1,000人の獲得とPMF検証
- **中期（1-2年）**：フリーミアム＋サブスクモデルで年間売上1,000万円（想定ARPU ¥2,400/年、有料転換率5%）
- **長期（3年以降）**：体験データの蓄積による観光事業者・自治体向けインサイト提供、B2B/B2G収益の確立

### 2. 主な機能

#### コア機能（差別化の中核）
1. **写真自動解析・クラスタリング**：EXIF情報（GPS・撮影日時）から、距離閾値（100-300m）と時間閾値（15-60分）で旅行スポットを自動グルーピング
2. **時系列タイムライン生成**：スポット単位で代表写真・滞在時間・移動順序を可視化し、旅の行程を再現
3. **地図統合表示**：地図上にスポットをプロット、移動経路を可視化（ルート表示は任意）
4. **AIストーリー生成**：写真の内容・位置・時間から旅の文脈を推定し、自然な文章で旅行記を自動生成
5. **ライフログ蓄積**：旅行履歴を年表形式で保存、過去の旅を振り返る「人生ログ」として機能

#### 差別化機能（競合優位性）
1. **データネットワーク効果**：同一場所の行動パターンが蓄積されることで、行程推定精度が向上（後続ユーザーへの価値向上）
2. **旅行後リマインド通知**：旅行検知アルゴリズムで帰宅後に記録生成を促し、忘却を防止
3. **共有最適化テンプレート**：SNSプラットフォームごとに最適化された共有フォーマットを自動生成

#### 付加価値機能（エンゲージメント向上）
1. **年次振り返り機能**：1年間の旅行履歴をまとめたアニュアルレポート生成（記念日・総移動距離など）
2. **旅行発見レコメンド**：他ユーザーの体験データから、ユーザーの好みに合った旅行プランを提案

### 3. 提供する価値

#### ユーザーにとっての直接的価値
- **整理コストゼロ**：何もしなくても旅の記録が完成し、見るだけで思い出が蘇る体験
- **記憶の再体験**：時系列・地図・写真の統合表示により、旅の流れと感情が鮮明に思い出せる
- **共有の簡便性**：説明不要で家族・友人に旅の全体像を伝えられる形式

#### ビジネスにとっての価値
- **スイッチングコスト構築**：時系列で蓄積される「人生ログ」が他サービスへの移行障壁となり、LTV向上
- **データ資産化**：位置×時間×体験単位の構造化データは観光産業への販売可能な希少資源
- **プロセス優位性**：運用データによる継続的な精度改善が競合の参入障壁になる

#### 社会的価値
- **旅行文化の民主化**：レビューサイト依存から脱却し、リアルな体験に基づく旅の発見を促進
- **地域観光の可視化**：匿名化データを活用し、観光地の回遊動線・滞在時間などを自治体・事業者に提供、地域活性化に貢献

### 4. 実現方法の概要

#### 主要なテクノロジー要素
- **画像処理・EXIF抽出**：写真メタデータ（GPS、撮影日時）の自動解析
- **空間クラスタリング**：DBSCAN・k-meansを用いた位置情報の密度ベースクラスタリング
- **逆ジオコーディング**：GPS座標から地名・スポット名を取得（Google Maps API / Mapbox）
- **自然言語生成（NLG）**：OpenAI GPT-4 / Claude等のLLMによるストーリー生成
- **プライバシー対応**：オンデバイス処理優先、位置データの暗号化保存、完全削除機能

#### 重要なインテグレーションポイント
- **SNS連携**：Instagram・Twitter・Facebook等へのシェア導線、OGPタグ最適化
- **クラウドストレージ連携**：Google Photos・iCloud・Dropboxからの写真インポート
- **観光API連携**：観光スポット情報の補完（じゃらん・楽天トラベル・Google Places）
- **決済システム連携**：Stripe・PayPalによるサブスクリプション・従量課金の実装

#### スケーラビリティへの考慮
- **段階的AI処理**：MVP時は手動運用、段階的に自動化率を向上（生成待ち時間の短縮）
- **データベース設計**：PostgreSQL + PostGIS（位置情報検索最適化）、将来的にTimeScaleDB導入
- **CDN活用**：画像配信の高速化（Cloudflare / AWS CloudFront）
- **オンデバイス処理移行**：将来的にクラスタリング処理をユーザー端末で実行し、推論コスト削減

---

## 情報の前提と仮定

### 使用した情報源
本システム要件定義書は、以下の入力ファイルを統合・分析して作成しました：

1. **ビジネスモデル関連**
   - `uplogue_lean_canvas_concise.md`：顧客セグメント・価値提案・収益構造
   - `uplogue_pricing_strategies.md`：フリーミアム・従量課金・年額モデルの比較
   - `uplogue_innovative_business_models.md`：非連続ビジネスモデル（B2B/B2Gデータ販売、保険モデル）

2. **競争優位性・戦略**
   - `uplogue_7powers_moat_analysis.md`：7 Powersフレームワークに基づく長期的な競争優位性分析

3. **プロダクト設計**
   - `uplogue_value_proposition_canvas.md`：顧客のジョブ・ペイン・ゲインの整理
   - `uplogue_customer_journey.md`：ペルソナの認知→定着までの体験フロー
   - `uplogue_auto_triplog_location_time_only.md`：コア機能の技術的実装方針

4. **検証計画**
   - `uplogue_lean_validation_plan.md`：未検証の仮説とMVP検証計画
   - `uplogue_interview_questions.md`・`uplogue_interview_targets.md`：ユーザーインタビュー設計

5. **デザイン**
   - `uplogue_design_style_guide.md`：ブランドイメージ・UIスタイル・カラーパレット

### 置いた仮定とその根拠

#### 1. ターゲットユーザー規模と成長予測
**仮定**：初期ユーザー500-1,000人（6ヶ月）、1年後10万人、3年後50万人\
**根拠**：
- リーンキャンバスで「写真は撮るが記録が続かない旅行者」をアーリーアダプターと定義
- カスタマージャーニーで29歳男性会社員（年2-3回旅行）をペルソナ設定
- 類似サービス（Polarsteps：100万DL、Day One：数十万ユーザー）の成長率を参考
- 日本の20-30代旅行者市場（推定500万人）の1-10%を段階的に獲得想定

#### 2. 技術的制約とコスト構造
**仮定**：AI推論コストは1旅行生成あたり¥50-100、初期は手動運用でコスト抑制\
**根拠**：
- GPT-4 APIの画像解析コスト（10枚処理で¥30-50程度）
- リーン検証プランで「手動運用MVP」が提案されており、初期は自動化を段階実装
- コスト構造に「AI推論コスト」が明記されており、段階的な最適化が前提

#### 3. 収益モデルの選定
**仮定**：フリーミアム＋軽課金サブスク（¥300/月）をメインモデルとし、有料転換率5%を目標\
**根拠**：
- 料金戦略分析で「フリーミアム＋軽課金サブスク」が最も口コミを起こしやすいと評価
- ARPU目標¥2,400/年（月換算¥200）が設定されており、¥300/月は妥当なライン
- 類似サービス（Evernote・Notion）の有料転換率が3-5%であることから現実的な目標値

#### 4. 非機能要件（パフォーマンス・可用性）
**仮定**：初期ユーザー1,000人規模を想定し、主要画面のレスポンスタイムは3秒以内、生成処理は5分以内\
**根拠**：
- アーリーアダプター規模が500-1,000人と想定されている
- カスタマージャーニーで「生成時間の待ち」が課題として挙げられ、「即時プレビュー生成」が改善機会として記載
- 一般的なWebアプリケーションのUX基準（3秒以内が許容範囲）

#### 5. データ品質とプライバシー対応
**仮定**：位置情報欠損率20-30%、屋内撮影・GPSオフ写真は補完機能で対応\
**根拠**：
- コア機能説明で「位置情報欠損（GPSオフ、屋内、圏外）への対応が必要」と明記
- 実装課題として「誤クラスタ」「地名付与の精度」が挙げられており、段階的な品質向上が前提
- GDPR・個人情報保護法への準拠が必須（プライバシー配慮が明示されている）

---

## 機能要件

### 1. 写真アップロード・インポート機能

#### 1.1 アップロード
- **複数写真の同時アップロード**（ドラッグ&ドロップ対応、最大100枚/回）
- **対応形式**：JPEG、PNG、HEIC（iOS）
- **EXIF情報の自動抽出**：撮影日時・GPS座標（緯度経度）・カメラ情報
- **位置情報欠損写真の扱い**：
  - GPS情報がない写真は「手動位置指定」または「除外」を選択可能
  - 時刻情報のみでタイムライン挿入（スポット推定は無効）

#### 1.2 外部サービス連携インポート
- **Google Photos連携**：アルバム単位での一括インポート
- **iCloud Photos連携**：iOS標準写真アプリからの直接共有
- **Dropbox/OneDrive連携**：フォルダ単位でのインポート

#### 1.3 プライバシー保護
- **アップロード時の明示的同意取得**：位置情報の利用目的説明、オプトイン形式
- **データ削除機能**：旅行記録・写真の完全削除（サーバーからも削除）
- **オンデバイス処理オプション**：将来的に、クラスタリング処理をローカル実行可能に

---

### 2. 旅行記録自動生成機能

#### 2.1 時系列整列
- 撮影日時でソート、旅行開始・終了日時の自動検出
- 複数旅行の自動分割（24時間以上の空白、または1,000km以上の移動で分割）

#### 2.2 スポットクラスタリング
- **距離閾値**：初期値200m（ユーザー設定で100-500m調整可能）
- **時間閾値**：初期値30分（ユーザー設定で15-120分調整可能）
- **アルゴリズム**：DBSCAN（密度ベースクラスタリング）を採用
  - 移動中の連写写真をノイズとして除外
  - 滞在時間・写真密度から「立ち寄り」「滞在」を推定

#### 2.3 逆ジオコーディング・スポット名推定
- **地名取得**：GPS座標から地名・住所を取得（Google Maps Geocoding API / Mapbox）
- **スポット名推定**：POI（Point of Interest）データから観光地・施設名を取得
- **手動編集機能**：自動推定が誤っている場合、ユーザーが手動でスポット名を変更可能

#### 2.4 代表写真選定
- 各スポットの代表写真を自動選定（画質・構図・顔検出などのスコアリング）
- ユーザーによる代表写真の変更機能

#### 2.5 AIストーリー生成
- **LLM活用**：OpenAI GPT-4 / Anthropic Claudeを使用
- **生成内容**：
  - 旅行サマリー（日程・総移動距離・訪問スポット数）
  - スポットごとの説明文（滞在時間・写真から推定される活動内容）
  - 全体を通じたストーリー文章（旅の流れ・感情の推定）
- **トーン調整**：ユーザーが文章スタイルを選択可能（フォーマル・カジュアル・詩的）

---

### 3. 旅行記録表示・閲覧機能

#### 3.1 タイムライン表示
- **時系列スクロール**：縦スクロールで旅の流れを追体験
- **スポットカード**：代表写真・スポット名・滞在時間・説明文を表示
- **写真ギャラリー**：各スポットの全写真をスワイプで閲覧

#### 3.2 地図表示
- **地図プロット**：訪問スポットを地図上にピン表示（Google Maps / Mapbox）
- **移動経路表示**（オプション）：スポット間の移動ルートを線で表示
- **地図とタイムラインの連動**：スポットタップで地図上の位置を表示、逆も可

#### 3.3 年表ビュー（ライフログ）
- **年単位の旅行一覧**：カレンダー形式または年表形式で過去旅行を一覧表示
- **統計情報**：総旅行回数・総移動距離・訪問国/都市数

---

### 4. 共有・エクスポート機能

#### 4.1 SNSシェア
- **プラットフォーム最適化**：Instagram・Twitter・Facebook用にフォーマット自動調整
- **OGP対応**：シェア時のサムネイル・説明文を自動生成
- **ハッシュタグ提案**：訪問地に応じた人気ハッシュタグを提案

#### 4.2 URL共有
- **公開/限定公開設定**：旅行記録ごとに公開範囲を設定（完全公開・URLを知る人のみ・非公開）
- **埋め込みコード提供**：ブログ等への埋め込みコード生成

#### 4.3 エクスポート
- **PDF出力**：旅行記録をPDF形式でダウンロード（印刷・保存用）
- **写真一括ダウンロード**：旅行単位で写真をZIP圧縮してダウンロード

---

### 5. ユーザー管理・アカウント機能

#### 5.1 認証
- **メールアドレス登録**：メール認証によるアカウント作成
- **ソーシャルログイン**：Google・Apple ID・Facebookアカウントでのログイン

#### 5.2 プロフィール
- **基本情報**：ユーザー名・プロフィール画像・自己紹介
- **旅行統計**：総旅行回数・訪問国数などのバッジ表示

#### 5.3 プラン管理
- **無料プラン**：月3旅行まで生成、標準画質保存（1GB）
- **Plus プラン（¥300/月）**：無制限生成、高画質保存（50GB）、年表表示、共有デザイン拡張
- **従量課金**：無料プラン超過時の追加生成（¥120/旅行）

---

### 6. 旅行発見・レコメンド機能（中期実装）

#### 6.1 旅行検索
- **スポット検索**：他ユーザーの訪問スポットから検索
- **ルート検索**：類似した行程の旅行記録を検索

#### 6.2 パーソナライズレコメンド
- **類似旅行の推薦**：ユーザーの過去旅行から好みを分析し、おすすめ旅行を提案
- **次の旅の着想**：訪問スポットの周辺情報・関連スポットを提案

---

### 7. 旅行後リマインド機能

#### 7.1 旅行検知
- **自動検知アルゴリズム**：写真のGPS・撮影日時から旅行開始・終了を推定
- **プッシュ通知**：旅行終了後24時間以内に記録生成を促す通知

#### 7.2 記念日通知
- **1年後リマインド**：旅行から1年後に振り返りを促す通知
- **年次レポート**：1年間の旅行まとめをアニュアルレポート形式で生成

---

### 8. 管理者機能

#### 8.1 ユーザー管理
- ユーザー一覧・検索・アカウント停止
- 利用状況の監視（生成回数・ストレージ使用量）

#### 8.2 コンテンツモデレーション
- 不適切コンテンツの検出・削除
- ユーザー報告への対応

#### 8.3 データ分析
- 利用統計（DAU・MAU・生成完了率・シェア率）
- クラスタリング精度の監視・改善

---

## 非機能要件

### 1. パフォーマンス

#### 1.1 レスポンスタイム
**目標値（初期ユーザー1,000人規模を想定）**
- **画面表示**：主要画面のロード時間3秒以内（Webフロントエンド）
- **写真アップロード**：100枚のアップロード完了まで60秒以内（10Mbps回線想定）
- **タイムライン生成**：写真50枚の旅行記録生成5分以内（初期プレビューは30秒以内）
- **地図表示**：地図ロード2秒以内

**根拠**：
- カスタマージャーニーで「生成時間の待ち」が課題として挙げられている
- 改善機会として「即時プレビュー生成・進捗表示」が記載されている
- UX標準では3秒以内が許容範囲、5分以内なら進捗バーで対応可能

#### 1.2 スループット
- **同時生成処理**：初期は10件/分、1年後には100件/分処理可能に拡張
- **API応答**：平均200ms以内、95パーセンタイルで500ms以内

---

### 2. スケーラビリティ

#### 2.1 ユーザー数
- **初期（6ヶ月）**：500-1,000人対応
- **1年後**：10万人対応（データベース・ストレージ拡張）
- **3年後**：50万人対応（マルチリージョン展開検討）

#### 2.2 データ量
- **写真ストレージ**：1ユーザーあたり平均10旅行、1旅行50枚、1枚5MB = 2.5GB/ユーザー
- **総容量見積もり**：10万ユーザーで250TB、CDN活用でコスト最適化

#### 2.3 生成処理
- **初期**：手動運用でコスト抑制、週末旅行後のピーク負荷に対応
- **中期**：キューイングシステム（Redis Queue / AWS SQS）導入で非同期処理
- **長期**：オンデバイス処理移行でサーバー負荷削減

---

### 3. 可用性・信頼性

#### 3.1 稼働率
- **目標稼働率**：99.5%（月間ダウンタイム3.6時間以内）
- **計画メンテナンス**：月1回、深夜帯（日本時間2-4時）、最大2時間

**根拠**：SaaSの標準的なSLA（99.5-99.9%）を参考。初期は99.5%を目指し、段階的に向上。

#### 3.2 データバックアップ
- **自動バックアップ**：日次バックアップ（データベース・写真ストレージ）
- **リテンション**：30日間保持、重要データは90日間
- **災害対策**：マルチリージョンバックアップ（AWS S3クロスリージョンレプリケーション）

#### 3.3 エラーハンドリング
- **生成失敗時**：リトライ処理（最大3回）、失敗時にユーザーへ通知・手動再実行可能
- **部分生成対応**：位置情報欠損写真がある場合、可能な範囲で生成を完了

---

### 4. セキュリティ

#### 4.1 認証・認可
- **パスワードポリシー**：最低8文字、英数字・記号の組み合わせ
- **多要素認証（MFA）**：オプションで有効化可能
- **セッション管理**：JWT（JSON Web Token）、有効期限7日間

#### 4.2 データ保護
- **通信暗号化**：TLS 1.3以上、すべてのAPI通信をHTTPS化
- **位置情報の暗号化保存**：データベース内でAES-256暗号化
- **個人情報の匿名化**：B2Bデータ提供時は完全匿名化・統計処理を実施

#### 4.3 脆弱性対策
- **定期的なセキュリティ診断**：年2回の脆弱性スキャン
- **依存ライブラリの管理**：自動更新チェック（Dependabot / Snyk）
- **CSP（Content Security Policy）**：XSS攻撃対策

---

### 5. ユーザビリティ・アクセシビリティ

#### 5.1 対応プラットフォーム
- **Webアプリ**：Chrome・Safari・Edge最新2バージョン対応
- **モバイルWebアプリ**：iOS Safari・Android Chrome対応（PWA対応）
- **ネイティブアプリ（中期実装）**：iOS 15以上、Android 10以上

#### 5.2 デザインコンセプト
- **スタイル**：「記憶を整える」「静かな旅情」をキーワードに、余白を広くとったミニマルデザイン
- **カラーパレット**：
  - Soft Ivory #F6F5F2（背景）
  - Deep Ocean #1E3A5F（メインカラー）
  - Travel Blue #3A7BD5（アクション）
  - Sunset Amber #F2A65A（ハイライト）
- **タイポグラフィ**：可読性の高いヒューマニストサンセリフ、本文は中太ウェイト

#### 5.3 アクセシビリティ
- **WCAG 2.1 Level AA準拠**：色覚特性への配慮、キーボードナビゲーション対応
- **スクリーンリーダー対応**：ARIA属性の適切な設定

---

### 6. 保守性・運用性

#### 6.1 ログ・モニタリング
- **アプリケーションログ**：エラー・警告・情報レベルで記録（CloudWatch Logs / Datadog）
- **パフォーマンス監視**：API応答時間・エラー率・サーバーリソース使用率
- **アラート設定**：エラー率5%超過、稼働率99%未満、レスポンス時間5秒超過

#### 6.2 デプロイ
- **CI/CD**：GitHub Actions / GitLab CIによる自動テスト・デプロイ
- **ブルーグリーンデプロイ**：ゼロダウンタイムデプロイ
- **ロールバック**：問題発生時に即座に前バージョンへ戻せる体制

#### 6.3 ドキュメント
- **API仕様書**：OpenAPI（Swagger）形式で管理
- **運用マニュアル**：障害対応手順、バックアップ・リストア手順
- **ユーザーヘルプ**：FAQページ、使い方ガイド動画

---

### 7. コンプライアンス・法的要件

#### 7.1 個人情報保護
- **GDPR準拠**：EU圏ユーザーへの対応（データポータビリティ、削除権の保証）
- **日本の個人情報保護法準拠**：プライバシーポリシーの明示、第三者提供の同意取得

#### 7.2 位置情報の取り扱い
- **利用目的の明示**：アップロード時に位置情報利用目的を説明
- **オプトアウト機能**：位置情報を利用しない記録生成も可能に

#### 7.3 知的財産権
- **写真の著作権**：ユーザーが著作権を保持、サービスは利用許諾のみ
- **AIモデルのライセンス**：OpenAI・Anthropicの利用規約遵守

---

## 技術スタック

### 1. フロントエンド

#### 採用技術
- **フレームワーク**：React 18 + TypeScript
- **状態管理**：Zustand（軽量・シンプルな状態管理）
- **UIライブラリ**：Tailwind CSS + Headless UI（デザインシステムの柔軟性）
- **地図**：Mapbox GL JS（カスタマイズ性が高く、デザイン統合しやすい）
- **画像処理**：exifr（EXIF情報抽出）

#### 選定理由
- **React + TypeScript**：型安全性・エコシステムの充実・採用市場の広さ
- **Mapbox**：Google Mapsより安価、デザインカスタマイズが容易（「静かな旅情」のデザインコンセプトに適合）
- **Tailwind CSS**：ユーティリティファーストで開発速度向上、デザインの一貫性確保

---

### 2. バックエンド

#### 採用技術
- **言語**：Python 3.11（データ処理・AI連携に強い）
- **フレームワーク**：FastAPI（非同期処理対応、高速、自動ドキュメント生成）
- **タスクキュー**：Celery + Redis（非同期処理・生成ジョブ管理）
- **AI/ML**：
  - OpenAI API（GPT-4 for テキスト生成）
  - scikit-learn（クラスタリング：DBSCAN）
  - Pillow（画像処理）

#### 選定理由
- **Python + FastAPI**：AI/MLライブラリが豊富、非同期処理でパフォーマンス向上、型ヒントでコード品質向上
- **Celery + Redis**：生成処理の非同期化により、レスポンス時間短縮とスケーラビリティ確保
- **OpenAI API**：高品質な自然言語生成、段階的にコスト削減（オープンソースモデル検討）

---

### 3. データベース

#### 採用技術
- **RDB**：PostgreSQL 15 + PostGIS（位置情報検索最適化）
- **キャッシュ**：Redis（セッション管理、タスクキュー、API応答キャッシュ）

#### 選定理由
- **PostgreSQL + PostGIS**：位置情報の高速検索（空間インデックス）、JSONBでメタデータ保存、堅牢性が高い
- **Redis**：高速なキャッシュ、タスクキューのバックエンドとして広く使われる

---

### 4. ストレージ

#### 採用技術
- **オブジェクトストレージ**：AWS S3（写真保存）
- **CDN**：Cloudflare（画像配信高速化、コスト最適化）

#### 選定理由
- **AWS S3**：耐久性99.999999999%、マルチリージョンレプリケーション対応、安価
- **Cloudflare CDN**：グローバル配信、無料プランでも高性能

---

### 5. インフラ・デプロイ

#### 採用技術
- **クラウド**：AWS（Compute: ECS Fargate / Lambda、Database: RDS PostgreSQL、Storage: S3）
- **コンテナ**：Docker + Docker Compose（開発環境）
- **CI/CD**：GitHub Actions（自動テスト・デプロイ）
- **監視**：AWS CloudWatch + Datadog（ログ・メトリクス監視）

#### 選定理由
- **AWS**：エコシステムが充実、段階的なスケールアップが容易、日本リージョンでの低レイテンシ
- **ECS Fargate**：サーバーレスコンテナ実行、運用負荷低減、コスト最適化
- **GitHub Actions**：無料プランで十分な機能、GitHubとの統合がスムーズ

---

### 6. 外部API・サービス

#### 採用技術
- **逆ジオコーディング**：Mapbox Geocoding API（Mapboxと統合、コスト安）
- **決済**：Stripe（サブスクリプション・従量課金対応）
- **認証**：Auth0（ソーシャルログイン、MFA対応）
- **メール送信**：SendGrid（通知メール、リマインド）

#### 選定理由
- **Mapbox Geocoding**：地図表示と統合、Google Mapsより安価、無料枠が大きい
- **Stripe**：SaaSサブスク実装が容易、税務対応、日本の決済手段対応
- **Auth0**：認証実装の短期化、セキュリティベストプラクティス、スケーラブル

---

### 技術スタック選定の総合理由

1. **機能・非機能要件への適合**
   - 位置情報検索：PostgreSQL + PostGIS
   - 非同期処理：Celery + Redis
   - AI生成：OpenAI API
   - 高速画像配信：S3 + Cloudflare CDN

2. **チームスキル（想定）**
   - Python・React・AWSは市場に人材が多く、採用・教育コストが低い
   - FastAPI・Tailwindは学習曲線が緩やか

3. **スケーラビリティ**
   - ECS Fargateで水平スケール、Lambdaで従量課金
   - PostgreSQL RDSでストレージ自動拡張
   - S3で無制限ストレージ

4. **コスト**
   - 初期（1,000ユーザー）：月$200-500（ECS Fargate、RDS、S3、OpenAI API）
   - 中期（10万ユーザー）：月$5,000-10,000（自動スケール、CDN活用）
   - コスト削減策：オンデバイス処理移行、オープンソースLLM検討

5. **保守性**
   - Dockerでローカル環境再現性確保
   - TypeScript・Python型ヒントでコード品質向上
   - GitHub Actionsで自動テスト・デプロイ、人的ミス削減

---

## 開発ロードマップ

### フェーズ1：MVP（Minimum Viable Product）開発 - 6ヶ月

**目標**：コア機能の実装と初期ユーザー500-1,000人でのPMF検証

#### 主要機能
- 写真アップロード（EXIF抽出）
- 時系列整列・簡易クラスタリング（DBSCAN）
- タイムライン表示（スポットカード＋代表写真）
- 地図プロット（Mapbox）
- 手動運用AIストーリー生成（週末バッチ処理）
- ユーザー登録・ログイン（メール認証）
- 基本的な共有機能（URL公開）

#### 検証指標
- 生成完了率：60%以上
- 閲覧完了率：70%以上
- 「もう一度使いたい」回答率：50%以上
- シェア率：15%以上

#### フェーズ分けの根拠
- **MVPへの注力**：リーン検証プランで「手動運用MVP」が提案されており、初期は自動化を段階実装
- **リスク軽減**：技術的難易度の高いAI自動化は段階的に実装し、初期は手動運用でユーザー価値を検証

---

### フェーズ2：自動化・スケール拡大 - 6-12ヶ月

**目標**：自動生成の完全実装と1万ユーザー獲得

#### 主要機能
- AI自動生成（リアルタイム処理、待ち時間30秒以内のプレビュー）
- Celery + Redisによる非同期処理導入
- 外部サービス連携（Google Photos・iCloud）
- SNS最適化シェア機能
- 旅行後リマインド通知
- 有料プラン実装（フリーミアム＋サブスク）

#### 検証指標
- DAU/MAU比率：20%以上
- 30日後継続率：40%以上
- 有料転換率：3%以上

#### フェーズ分けの根拠
- **技術的依存関係**：非同期処理基盤が整ってから有料化（生成速度が重要）
- **ビジネス目標**：1万ユーザーで収益基盤確立（月間¥30万の売上目標）

---

### フェーズ3：プラットフォーム拡張 - 12-24ヶ月

**目標**：10万ユーザー獲得、B2Bデータ販売開始

#### 主要機能
- 旅行発見・レコメンド機能
- 年表ビュー・年次レポート
- ネイティブアプリ（iOS・Android）
- 匿名化データの観光事業者・自治体への提供（B2B/B2G）
- オンデバイス処理の段階的導入（クラスタリング）

#### 検証指標
- MAU：5万人以上
- B2B契約：5-10社
- 月間売上：¥500万以上

#### フェーズ分けの根拠
- **データ蓄積**：10万ユーザー規模でデータネットワーク効果が発現、B2B価値が成立
- **スケーラビリティ**：ネイティブアプリでUX向上、オンデバイス処理でコスト削減

---

### フェーズ4：グローバル展開・エコシステム化 - 24ヶ月以降

**目標**：50万ユーザー、旅行証明インフラとしてのエコシステム形成

#### 主要機能
- 多言語対応（英語・中国語・韓国語）
- 旅行証明API（観光地・イベント・特典サービスとの連携）
- マルチリージョン展開（アジア・欧米）
- データインサイトプラットフォーム（自治体向けダッシュボード）

#### 検証指標
- MAU：30万人以上
- B2B/B2G売上比率：30%以上
- 海外ユーザー比率：20%以上

#### フェーズ分けの根拠
- **非連続ビジネスモデル**：データ蓄積が進み、「旅行証明インフラ」として他サービスとの連携が可能に
- **グローバル市場**：国内市場で確立後、海外展開でさらなる成長

---

## リスク分析

### 技術的リスク

#### 1. 位置情報欠損への対応（高リスク）
**内容**：GPSオフ・屋内・圏外で撮影された写真は位置情報が欠損し、クラスタリング精度が低下\
**影響度**：高（コア価値に直結）\
**対策**：
- 時刻情報のみでタイムライン挿入機能
- ユーザーによる手動位置指定UI
- 写真内容（画像認識）から場所を推定する補完機能（中期実装）

#### 2. AIモデルのコスト増大（中リスク）
**内容**：OpenAI APIのコストがユーザー増加に伴い急増し、収益を圧迫\
**影響度**：中（ビジネスモデルに影響）\
**対策**：
- 初期は手動運用で需要を検証
- 生成回数制限（無料プラン：月3回）
- オープンソースLLM（Llama、Mistral）への段階的移行
- オンデバイス処理の検討

#### 3. クラスタリング精度の誤差（中リスク）
**内容**：近接スポット（駅周辺など）で写真が混ざる、移動中の連写がノイズになる\
**影響度**：中（UXに影響）\
**対策**：
- ユーザーによる手動分割・統合機能
- 継続的な閾値チューニング（運用データから最適化）
- 滞在時間・写真密度による「立ち寄り」「滞在」の推定精度向上

---

### ビジネス的リスク

#### 4. 継続利用率の低下（高リスク）
**内容**：初回は使うが、旅行頻度が低いユーザーは離脱し、継続率が低い\
**影響度**：高（LTV・収益に直結）\
**対策**：
- 旅行検知リマインド通知（旅行後24時間以内）
- 年次振り返り・記念日通知で定期的なリエンゲージメント
- 「人生ログ」としてのブランディング強化（過去旅行の振り返り価値）

#### 5. 有料転換率の低迷（中リスク）
**内容**：無料プランで満足され、有料転換率が3%未満に留まる\
**影響度**：中（収益目標未達）\
**対策**：
- 無料プランの制限設計を段階的に調整（月3回→月1回など）
- 有料プランの付加価値強化（高画質保存、年表ビュー、共有デザイン拡張）
- 従量課金オプション（¥120/旅行）でライト層からも収益確保

#### 6. 競合の参入（中リスク）
**内容**：Google Photos・Instagram等の大手が類似機能を実装\
**影響度**：中（市場シェアに影響）\
**対策**：
- データネットワーク効果の早期確立（10万ユーザー獲得）
- スイッチングコスト構築（時系列ログの蓄積）
- 「旅行特化」のニッチ戦略（大手は汎用サービスのため、旅行最適化が弱い）

---

### 法的・コンプライアンスリスク

#### 7. プライバシー規制への対応（高リスク）
**内容**：GDPR・個人情報保護法違反により、罰金・サービス停止のリスク\
**影響度**：高（事業継続に影響）\
**対策**：
- 位置情報利用の明示的同意取得（オプトイン）
- データ削除機能の実装（完全削除保証）
- プライバシーポリシー・利用規約の法的レビュー
- GDPR準拠のデータポータビリティ機能

#### 8. AIモデルの利用規約違反（中リスク）
**内容**：OpenAI・Anthropicの利用規約に違反し、API利用停止\
**影響度**：中（サービス停止）\
**対策**：
- 利用規約の定期的な確認・遵守
- 複数のAIモデルプロバイダーとの契約（リスク分散）
- オープンソースモデルへの段階的移行

---

### 運用的リスク

#### 9. 生成処理のピーク負荷（中リスク）
**内容**：週末・連休明けに生成リクエストが集中し、処理遅延・サーバーダウン\
**影響度**：中（UXに影響）\
**対策**：
- 非同期処理（Celery + Redis）でキューイング
- オートスケーリング設定（ECS Fargateのタスク数自動調整）
- ピーク時の進捗バー表示・完了通知で期待値コントロール

#### 10. データ損失・サービス停止（中リスク）
**内容**：障害・災害によるデータ損失、長時間のサービス停止\
**影響度**：中（信頼性に影響）\
**対策**：
- 日次自動バックアップ（30日間保持）
- マルチリージョンレプリケーション（災害対策）
- 稼働率監視・アラート体制（99.5%目標）

---

## 追加情報リクエスト

システム要件の精度と実現可能性をさらに高めるため、以下の情報をご提供いただけると幸いです。各項目には優先順位（高・中・低）を示しています。

### ビジネス・戦略に関する情報

#### 1. 開発予算と期間（優先度：高）
**質問**：
- 開発に投じられる初期予算はどの程度を想定していますか？（例：500万円、1,000万円など）
- MVP完成までの希望期間はどのくらいですか？（例：3ヶ月、6ヶ月など）

**要件定義への影響**：
- 予算により技術スタック選定が変わる（フルマネージドサービス vs 自前構築）
- 期間により機能の優先順位・フェーズ分けが変わる

---

#### 2. 開発チームのスキルセット（優先度：高）
**質問**：
- 現在の開発チーム構成と各メンバーのスキルセットを教えてください（例：Pythonエンジニア1名、Reactエンジニア1名など）
- 外部委託を想定していますか？それとも内製ですか？

**要件定義への影響**：
- チームスキルに応じた技術スタック選定（学習コスト・開発速度）
- 外部委託の場合、保守性・ドキュメント整備を重視

---

#### 3. ターゲットユーザーの具体的な規模目標（優先度：中）
**質問**：
- 初期のターゲットユーザー数はどの程度を想定していますか？（例：初年度1,000人、3年後10万人など）
- 主なターゲット地域は日本国内のみですか？それとも海外も視野に入れていますか？

**要件定義への影響**：
- インフラ規模設計（初期コスト vs スケーラビリティ）
- 多言語対応の優先度

---

#### 4. 収益化のタイミングと目標（優先度：中）
**質問**：
- いつから収益化を開始する予定ですか？（例：MVP完成後すぐ、1年後など）
- 初年度の売上目標はありますか？（例：100万円、1,000万円など）

**要件定義への影響**：
- 有料プラン実装のタイミング（フェーズ1 or フェーズ2）
- 決済システム連携の優先度

---

### プロダクト仕様に関する情報

#### 5. 初期実装の優先機能（優先度：高）
**質問**：
- MVP（フェーズ1）に必須の機能はどれですか？以下から選択してください：
  - AIストーリー生成（必須 or オプション）
  - SNSシェア機能（必須 or オプション）
  - 有料プラン（必須 or オプション）
  - 旅行発見・レコメンド（必須 or オプション）

**要件定義への影響**：
- 開発スコープの明確化、フェーズ分けの調整
- MVP完成までの期間・コスト見積もり

---

#### 6. ユーザーインタビューの実施状況（優先度：中）
**質問**：
- すでにユーザーインタビューを実施していますか？実施済みの場合、主な発見事項を教えてください
- 未実施の場合、いつ頃実施予定ですか？

**要件定義への影響**：
- 課題仮説の検証状況（要件定義の精度）
- フィードバックに基づく機能優先順位の調整

---

#### 7. 競合サービスの利用経験（優先度：低）
**質問**：
- 類似サービス（Polarsteps、Day One、Google Photosのタイムライン機能など）を実際に使ったことがありますか？
- それらのサービスに対する満足点・不満点は何ですか？

**要件定義への影響**：
- 差別化ポイントの明確化
- UX設計の参考

---

### 技術・運用に関する情報

#### 8. インフラ環境の制約（優先度：中）
**質問**：
- 利用可能なクラウドプロバイダーに制約はありますか？（例：AWS限定、GCP希望など）
- オンプレミス環境での構築を希望しますか？

**要件定義への影響**：
- 技術スタック選定（AWS vs GCP vs Azure）
- コスト見積もり

---

#### 9. 既存システムとの連携（優先度：低）
**質問**：
- 既存のシステムやサービスと連携する必要がありますか？（例：既存の顧客データベースなど）
- 特定のAPIやサービスとの統合が必須ですか？

**要件定義への影響**：
- インテグレーション設計の複雑度
- 開発期間・コスト

---

#### 10. 運用体制（優先度：中）
**質問**：
- サービス運用は誰が担当しますか？（例：開発チームが兼任、専任の運用チーム、外部委託など）
- 24時間365日のサポート体制は必要ですか？

**要件定義への影響**：
- 監視・アラート体制の設計
- 運用ドキュメントの充実度

---

### 法的・コンプライアンスに関する情報

#### 11. 法的要件の確認（優先度：高）
**質問**：
- EU圏のユーザーを対象にする予定はありますか？（GDPR対応の必要性）
- 位置情報の利用について、法務レビューは完了していますか？

**要件定義への影響**：
- プライバシー対応の実装範囲
- 利用規約・プライバシーポリシーの整備

---

以上の情報をご提供いただくことで、より実現可能性が高く、ビジネス目標に沿ったシステム要件定義書へとブラッシュアップできます。特に**優先度：高**の項目は、開発着手前に明確にしておくことを強く推奨します。
